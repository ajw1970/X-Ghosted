= Working Understanding of Expected Behavior for X-Ghosted
:author: ajw1970
:date: March 16, 2025
:revdate: March 16, 2025

== Overview
X-Ghosted is a userscript to enhance X.com by flagging problematic and potential-problem posts with visual cues, aiming for a testable version with UI/UX. This doc outlines the expected behavior as of the latest collaboration with Grok 3.

== Detection Logic
- *Problems*: Identified if either returns a match:
  - `postHasProblemSystemNotice.js`: Detects system-generated notices.
  - `articleLinksToTargetCommunities.js`: Flags links to target communities.
- *Potential Problems*: Identified if a problem post has a reply chain with depth < 10, per `findReplyingToWithDepth.js`.
- *Implementation*: Handled by `findMatchingArticles.js`, tested with `findMatchingArticles.test.js` using real samples from `samples/`.

== User Experience
- *Visual Cues*:
  - Problems: Red border (e.g., `3px solid red`).
  - Potential Problems: Yellow-green border (e.g., `3px solid #d4e157`), as seen in recent screenshots.
- *Dynamic Updates*: Uses `MutationObserver` to reapply highlights on page changes.
- *Future UI*: Toggle to enable/disable, counter for flagged posts (split by problem/potential), tooltip with reasons.

== Testing & Validation
- Tests in `findMatchingArticles.test.js` to be updated to distinctly validate:
  - Problem posts (system notices, community links).
  - Potential problem posts (problems + shallow replies).
- Samples in `samples/` provide real-world data for testing.

== Next Steps
- Refine `findMatchingArticles.test.js` to clarify distinctions.
- Integrate with `highlight-potential-problems.js` for visualization.
- Add minimal UI (toggle, counter, tooltip) for testing.

== Notes
- Resume collaboration via: [Grok-Prompt.txt](https://github.com/ajw1970/X-Ghosted/blob/61af2d333b503520dddbcb8857fdf2bd35103e7f/docs/Grok-Prompt.txt)
- Update this doc after each session to reflect progress.

== Revision History
- March 16, 2025: Added detection details, visual cues, and next steps based on latest Grok session.