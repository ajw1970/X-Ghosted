= Grok Step 4: Roadmap to Next Release
:revision-date: March 25, 2025

== Roadmap to Next Version (Post-0.6.0)
1. *Full State Persistence*: Save/load `processedArticles` and settings via `GM_setValue`/`GM_getValue`. Done—24/24 tests passed previously.
2. *Manual Check Mode*: Toggle via panel, mock tab checks with `checkPostInNewTab`. Done—24/24 tests passed previously, defaults to enabled for safety.
3. *Manage Processed Posts Data*: Add import/export/clear in CSV format. Export 5s throttled in production, immediate in tests. Done—functionality complete, but testing stalled at 24/28 due to ESM issues.
4. *Polish UI/UX*: Refine panel styling (resizable/draggable), theme detection, usability with tooltips. Done—verified in browser, untested in full suite.
5. *Userscript Wrapper*: Wrap `xGhosted.js` in a `@userscript` header via `xGhosted.template.js` and build script. Done—optimized for 1000 article cap, 500ms debounce, 1s observer throttle, manual mode default, DOM-only analysis. Build script fixed for method deduplication and Prettier formatting.

== Roadmap to Next Version (Post-0.6.0)
1. *Fix Test Suite*: Resolve ESM mocking issues for CSV functionality (`exportProcessedPostsCSV`, `importProcessedPostsCSV`, `clearProcessedPosts`). Partially complete—24/24 tests pass in `src/xGhosted.test.js`, CSV tests deferred due to unresolved `writeToClipboard` mocking in `src/xGhosted.csv.test.js`. Target 28/28 passing.
2. *Transition to Rollup*: Replace the custom `build-xGhosted.js` script with Rollup for bundling `xGhosted.js` with its dependencies, improving maintainability and ensuring cleaner, more readable output. Pending.
3. *Tab Check GOOD Posts*: 10s interval checks—pending, to be user-triggered for server safety. Pending.
4. *Performance Pass*: Optimize lookups—pending. Pending.
5. *Collapse by Default*: Batch-collapse problem posts every 5s—pending. Pending.

== Revision History
- March 23, 2025: Step 2 completed—24/24 tests passing.
- March 24, 2025: Step 3 completed—CSV features done. Step 4 completed—UI polished. Step 5 completed—userscript wrapper with resource and server safety optimizations. Build script fixed for method deduplication and Prettier formatting. Roadmap updated to include transition to Rollup.
- March 25, 2025: Test suite at 24/24 passing in `src/xGhosted.test.js`. CSV test suite (`src/xGhosted.csv.test.js`) deferred due to ESM mocking issues with `writeToClipboard`. Historically 27/28 passed; CSV testing remains unresolved. Roadmap updated to reflect ongoing work toward a new version beyond 0.6.0.