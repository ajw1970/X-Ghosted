= Grok Context for xGhosted Project
:revision-date: March 26, 2025

== Purpose
This file is an optional snapshot of my (Grok 3, built by xAI) understanding of the xGhosted project as of March 26, 2025, supplementing the primary context in `_grok-step[1-4]` files per `_grok-readme-first.txt`. Use it as a quick reference to my current state, but always start with `_grok-step[1-4]` for authoritative guidance.

== Project Snapshot
Assisting with xGhosted at version 0.6.1, a Tampermonkey userscript (`xGhosted.user.js`) built from `xGhosted.js` and dependencies via `build-xGhosted.js` using esbuild. Key features include DOM-only post analysis (PROBLEM: red, POTENTIAL_PROBLEM: yellow, GOOD/UNDEFINED: none), a resizable/draggable panel with CSV export/import/clear, and persistence via `GM_setValue`/`GM_getValue`. The panel now includes a "Tools" section (collapsible, with Copy, Export CSV, Import CSV, Clear, and Manual Check buttons), a modal for CSV import, status dots for posts, and SVG icons for buttons, integrated from the 0.6.4 UI/UX design. Safeguards include a 1000-article cap enforced in `identifyPosts`, manual mode default (`isManualCheckEnabled = true`), configurable timing (debounce/throttle), and minimal server activity (tab checks throttled at 5000ms). The build script removes ESM exports for compatibility, and `npm run build` (not `npm build`) is the correct command due to npm’s script conventions. Tests (112 across 17 suites) cover core functionality, with CSV tests pending due to ESM mocking issues. Manual testing in progress: "Hide" functionality fixed with proper sizing and position persistence (panel starts at `top: '60px'`, `right: '10px'`, saves position after dragging), but the "Hide" button’s screen position during collapse and highlighting of the problem post `/ajweltytest/status/1901080866002014636` are pending. Remaining manual tests include button functionality (Copy, Manual Check, Export CSV, Import CSV, Clear), 1000-article cap verification, and eye icon visibility fix.

== Code Guidelines
- Use full blocks or files, no snippets unless requested.
- Avoid inline comments like "// In src/xGhosted.js"—state file locations before blocks.
- Ensure code is copy-paste ready for user convenience.

== Next Steps
- Verify the panel’s position persistence and hide behavior: Confirm the panel starts at `top: '60px'`, `right: '10px'`, saves the user’s position after dragging, and the "Hide" button stays fixed while the panel collapses toward it.
- Debug and fix the highlighting issue for the problem post `/ajweltytest/status/1901080866002014636`: Use console logs to determine why the post isn’t highlighted in the UI, ensuring it displays a red background for PROBLEM status.
- Polish the UI if necessary: Review button contrast (e.g., `#4A5C6D` on `#15202B` in dim mode) and spacing to improve readability and aesthetics.
- Complete manual testing of `xGhosted.user.js` in Tampermonkey:
  - Test remaining button functionality (Copy, Manual Check, Export CSV, Import CSV, Clear).
  - Verify 1000-article cap by loading more posts.
  - Fix eye icon visibility for POTENTIAL_PROBLEM posts (add `zIndex: '10000'`).
- Fix ESM mocking issues in `src/xGhosted.csv.test.js` to restore full test suite (targeting 28/28 passing for CSV functionality), deferred earlier due to `writeToClipboard` issues.