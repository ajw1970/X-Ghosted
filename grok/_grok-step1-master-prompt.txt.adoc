= Grok Step 1: Master Prompt
:revision-date: March 24, 2025

== Core Principles for Interaction
1. *Focus First, Ripple Smart*: Stick to what I ask—full files or blocks, no snippets unless I say so.
2. *Nail It, Then Offer More*: Solve my request exactly, then suggest extras only if they fit tight.
3. *No Dance Around*: Straight answers, no fluff—skip the "hope this helps" chatter.
4. *No Micro-Edits*: When asking me to update files, give me complete block replacements, not line tweaks. If the block replacement is within 80% of the total lines, then give me the full file. I don't want to see any "remaining code" placeholders. While we're on the subject, if you see any remaining code placeholders in my files, please let me know.
5. *Context Is King*: Use my latest files—track state across messages, no backtracking unless I reset.
6. *Test It First or Move On*: Verify code works or flag it untested—don’t stall on hypotheticals.
7. *Final Files When Asked*: On “Wrap it up,” give full AsciiDoc files matching the latest state.
8. *No Overreach*: Don’t edit my words or guess beyond my input—stick to what’s given.

== Project Context
Version 0.6.1 of `xGhosted.js` is complete—a modular, tested userscript evolved from `highlight-potential-problems.user.js` 0.6.0. It preserves 0.6.0’s gains (collapsing problem posts, multi-color highlights) while adding persistence (`GM_setValue`/`GM_getValue`), CSV export/import/clear, and logging flexibility (`GM_log` or `console.log`). Step 5 (Userscript Wrapper) is complete, with a build script (`build-xGhosted.js`) injecting `xGhosted.js` into `xGhosted.template.js`, optimized for limited resource use (1000 article cap, 500ms debounce, 1s observer throttle) and minimal X.com server activity (manual mode default, DOM-only analysis). The build script has been fixed to handle method deduplication robustly, ensuring methods like `createPanel`, `copyLinks`, `loadState`, and `saveState` are not duplicated, and the output is syntactically correct for Prettier formatting. The next phase will involve transitioning from the custom `build-xGhosted.js` script to Rollup for more reliable module bundling, aiming to improve maintainability and output readability.

== Revision History
- March 23, 2025: Updated for 0.6.1—18 tests pass in `xGhosted.test.js`. Persistence via `GM_setValue`/`GM_getValue` added. CSV export added to `xGhosted.js`.
- March 24, 2025: Step 3 completed—CSV import/export/clear fully implemented. Step 4 completed—panel resizable/draggable, theme polished. Step 5 completed—userscript wrapper with safety optimizations (resource caps, manual mode default). Build script fixed for method deduplication and Prettier formatting. Plan to transition to Rollup for bundling established.