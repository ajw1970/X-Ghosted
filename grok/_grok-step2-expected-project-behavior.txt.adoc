= Grok Step 2: Expected Project Behavior
:revision-date: March 27, 2025

== Core Features in Current State
- *Detection*: Highlights PROBLEM (red), POTENTIAL_PROBLEM (yellow, with eye icons), GOOD (none), UNDEFINED (none) posts on X’s `/with_replies` pages using local DOM analysis only. POTENTIAL_PROBLEM detection inconsistent, pending DOM investigation.
- *UI*: Floating panel (resizable, draggable) lists problem/potential posts with Copy, Export CSV (configurable throttle), Import CSV, Clear, and Manual Check buttons. Theme switching (dark/dim/light) is seamless with tooltips. Show/Hide button positioning is a known issue (should be top-right, currently bottom-right—see roadmap Issue 2). Panel size when hidden adjusted to fit "Show" button comfortably.
- *Persistence*: State saved via `GM_setValue`/`GM_getValue`—loads/saves `processedArticles` (capped at 1000), settings, and panel position.
- *Logging*: Configurable via constructor—uses `GM_log` or `console.log`.
- *Safety*: Starts with `isManualCheckEnabled` true to limit server activity; configurable debounce/throttle values reduce resource use; 1000-article cap enforced in `identifyPosts`. No server requests beyond page loads.
- *Tests*: `src/xGhosted.test.js`—24 tests pass, covering core functionality. Total 112 tests across 17 suites, all passing.
- *Build*: `build-xGhosted.js` uses esbuild to bundle `xGhosted.js` with dependencies into `xGhosted.user.js`, removing ESM exports for Tampermonkey compatibility. Timing values configurable via constructor. Run via `npm run build`.

== Next Steps
See `_grok-step4-roadmap-to-next-release.txt.adoc` for current Next Steps.

== Revision History
- March 23, 2025: Step 2 completed—24/24 tests pass with Manual Check Mode mocked.
- March 26, 2025: Fixed "Hide" functionality, adjusted panel size when hidden to fit "Show" button comfortably.
- March 27, 2025: Clarified Show/Hide as a bug, noted POTENTIAL_PROBLEM detection pending DOM check.